(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[482],{820:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/results",function(){return s(8361)}])},1249:(e,t,s)=>{"use strict";let r;s.d(t,{db:()=>d,j:()=>l});var a=s(6042),i=s(6559),o=s(2964),n=s(5364);let c={apiKey:n.env.NEXT_PUBLIC_FIREBASE_API_KEY||"AIzaSyBhH9Z1CUSNAM4mVKN0EJZ7v2RSfaVJvUk",authDomain:n.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"ai-powerd-jee-learn.firebaseapp.com",projectId:n.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"ai-powerd-jee-learn",storageBucket:n.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"ai-powerd-jee-learn.firebasestorage.app",messagingSenderId:n.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"374670447388",appId:n.env.NEXT_PUBLIC_FIREBASE_APP_ID||"1:374670447388:web:049fc6cb2dca32349660d9",measurementId:n.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-EK06052MQE"};if(console.log("Firebase Config Loaded:",{hasApiKey:!!c.apiKey,apiKeyLength:c.apiKey?c.apiKey.length:0,authDomain:c.authDomain,usingFallback:!n.env.NEXT_PUBLIC_FIREBASE_API_KEY}),(0,a.Dk)().length)r=(0,a.Dk)()[0],console.log("Using existing Firebase app");else try{r=(0,a.Wp)(c),console.log("Firebase initialized successfully")}catch(e){throw console.error("Firebase initialization error:",e),e}let l=(0,i.xI)(r),d=(0,o.aU)(r)},8361:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>k});var r=s(7876),a=s(4250),i=s.n(a),o=s(4232),n=s(7328),c=s.n(n),l=s(9099),d=s(4796),u=s(6941),x=s(9142),b=s(8186),m=s(5952),h=s(1663),f=s(3609),p=s(2885),j=s(6153),g=s(498),w=s(9084),y=s(8119),N=s(252),v=s(9550),A=s(8720),E=s(747),z=s(9884),C=s(1249),_=s(2964);let k=()=>{let[e,t]=(0,o.useState)(null),[s,a]=(0,o.useState)(!0),[n,k]=(0,o.useState)(null),[I,P]=(0,o.useState)(!1),R=o.useRef(null),M=o.useRef(!1),Q=(0,l.useRouter)(),{quizId:S}=Q.query;(0,o.useEffect)(()=>{if(!M.current){if(!R.current){let t=setTimeout(()=>{R.current&&!M.current&&e()},100);return()=>clearTimeout(t)}e()}function e(){M.current=!0;let e=new d.Scene,t=new d.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3);t.position.z=5;let s=new d.WebGLRenderer({canvas:R.current,alpha:!0,antialias:!0});s.setSize(window.innerWidth,window.innerHeight);let r=new d.BufferGeometry,a=new Float32Array(15e3),i=new Float32Array(15e3);for(let e=0;e<15e3;e+=3){a[e]=(Math.random()-.5)*15,a[e+1]=(Math.random()-.5)*15,a[e+2]=(Math.random()-.5)*15;let t=Math.floor(3*Math.random());0===t?(i[e]=.2,i[e+1]=.4):1===t?(i[e]=.6,i[e+1]=.2):(i[e]=.2,i[e+1]=.8),i[e+2]=.8}r.setAttribute("position",new d.BufferAttribute(a,3)),r.setAttribute("color",new d.BufferAttribute(i,3));let o=new d.PointsMaterial({size:.02,vertexColors:!0,transparent:!0,opacity:.8}),n=new d.Points(r,o);e.add(n);let c=new d.AmbientLight(0xffffff,.5);e.add(c);let l=()=>{t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix(),s.setSize(window.innerWidth,window.innerHeight)};window.addEventListener("resize",l);let u=0,x=0,b=e=>{u=e.clientX/window.innerWidth*2-1,x=e.clientY/window.innerHeight*2-1};window.addEventListener("mousemove",b);let m=new d.Clock,h=()=>{requestAnimationFrame(h);let r=m.getElapsedTime();n.rotation.y=.05*r+.3*u,n.rotation.x=.03*r+.2*x,n.rotation.z=.02*r,o.size=.02+.005*Math.sin(r),s.render(e,t)};return h(),()=>{window.removeEventListener("resize",l),window.removeEventListener("mousemove",b),s&&s.dispose(),r&&r.dispose(),o&&o.dispose()}}},[]);let q=async e=>{try{let t=C.j.currentUser;if(!t)return;let s=(0,_.P)((0,_.rJ)(C.db,"userProgress"),(0,_._M)("userId","==",t.uid)),r=await (0,_.GG)(s);if(r.empty)await (0,_.gS)((0,_.rJ)(C.db,"userProgress"),{userId:t.uid,totalQuestions:e.totalQuestions,correctAnswers:e.correctAnswers,accuracy:Math.round(e.correctAnswers/e.totalQuestions*100),lastUpdated:new Date,quizAttempts:1,subjectPerformance:B(e.questions),topicPerformance:T(e.questions)});else{let t=r.docs[0],s=t.data();await (0,_.mZ)((0,_.H9)(C.db,"userProgress",t.id),{totalQuestions:s.totalQuestions+e.totalQuestions,correctAnswers:s.correctAnswers+e.correctAnswers,accuracy:Math.round((s.correctAnswers+e.correctAnswers)/(s.totalQuestions+e.totalQuestions)*100),lastUpdated:new Date,quizAttempts:s.quizAttempts+1,subjectPerformance:F(s.subjectPerformance,e.questions),topicPerformance:U(s.topicPerformance,e.questions)})}}catch(e){console.error("Error saving results to progress:",e)}},B=e=>{let t={Physics:{total:0,correct:0},Chemistry:{total:0,correct:0},Maths:{total:0,correct:0}};return e.forEach(e=>{t[e.subject]&&(t[e.subject].total++,e.isCorrect&&t[e.subject].correct++)}),[{name:"Physics",accuracy:t.Physics.total>0?Math.round(t.Physics.correct/t.Physics.total*100):0,color:"#3b82f6"},{name:"Chemistry",accuracy:t.Chemistry.total>0?Math.round(t.Chemistry.correct/t.Chemistry.total*100):0,color:"#22c55e"},{name:"Maths",accuracy:t.Maths.total>0?Math.round(t.Maths.correct/t.Maths.total*100):0,color:"#f97316"}]},T=e=>{let t={Physics:{},Chemistry:{},Maths:{}};e.forEach(e=>{e.subject&&e.topic&&t[e.subject]&&(t[e.subject][e.topic]||(t[e.subject][e.topic]={total:0,correct:0}),t[e.subject][e.topic].total++,e.isCorrect&&t[e.subject][e.topic].correct++)});let s={Physics:[],Chemistry:[],Maths:[]};return Object.keys(t).forEach(e=>{Object.keys(t[e]).forEach(r=>{let a=t[e][r];a.total>=3&&s[e].push({topic:r,score:Math.round(a.correct/a.total*100)})})}),s},F=(e,t)=>{let s=B(t);return e.map((e,t)=>{let r=s[t];if(e.totalQuestions&&r.totalQuestions){let t=e.totalQuestions+r.totalQuestions,s=e.correctAnswers+r.correctAnswers;return{...e,accuracy:Math.round(s/t*100)}}return e})},U=(e,t)=>{let s=T(t),r={...e};return Object.keys(s).forEach(e=>{s[e].forEach(t=>{let s=r[e].find(e=>e.topic===t.topic);s?s.score=Math.round((s.score+t.score)/2):r[e].push(t)})}),r};(0,o.useEffect)(()=>{(async()=>{try{a(!0),P(!1);let e=C.j.currentUser;if(!e)return void Q.push("/login");let s=null;if(S)try{let t=await (0,_.x7)((0,_.H9)(C.db,"quizResults",S));if(!t.exists())return void k("Quiz results not found");{let r=t.data();if(r.userId!==e.uid)return void k("You don't have permission to view these results");s=r,await q(s)}}catch(e){console.error("Error fetching specific quiz:",e),k("Failed to load quiz results");return}else try{let t=(0,_.P)((0,_.rJ)(C.db,"quizResults"),(0,_._M)("userId","==",e.uid),(0,_.My)("completedAt","desc"),(0,_.AB)(1)),r=await (0,_.GG)(t);if(r.empty)return void k("noQuizResults");s={id:r.docs[0].id,...r.docs[0].data()},await q(s)}catch(e){console.error("Error fetching quizzes:",e),"failed-precondition"===e.code&&e.message.includes("index")?(P(!0),k("Database index needs to be created")):k("Failed to load quiz results");return}t(s)}catch(e){console.error("Error in fetchResultsData:",e),k("An unexpected error occurred")}finally{a(!1)}})()},[S,Q]),(0,o.useEffect)(()=>{!s&&e&&u.os.timeline({defaults:{ease:"power3.out"}}).fromTo(".results-summary-card",{opacity:0,scale:.9},{opacity:1,scale:1,duration:.8,stagger:.15,delay:.3}).fromTo(".question-review-card",{opacity:0,y:50},{opacity:1,y:0,duration:.6,stagger:.1},"-=0.5")},[s,e]);let L=()=>Q.push("/dashboard");if(s)return(0,r.jsx)("div",{className:"min-h-screen bg-slate-900 text-gray-200 font-sans p-4 sm:p-8 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),(0,r.jsx)("p",{className:"mt-4",children:"Loading your results..."})]})});if(I)return(0,r.jsx)("div",{className:"min-h-screen bg-slate-900 text-gray-200 font-sans p-4 sm:p-8 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-center max-w-md mx-auto",children:(0,r.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-8",children:[(0,r.jsxs)("div",{className:"bg-yellow-500/20 text-yellow-300 p-4 rounded-lg mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Index Required"}),(0,r.jsx)("p",{className:"text-gray-300 mb-4",children:"Firebase needs to create an index for your query."}),(0,r.jsxs)("button",{onClick:()=>{window.open("https://console.firebase.google.com/v1/r/project/ai-powerd-jee-learn/firestore/indexes?create_composite=Cldwcm9qZWN0cy9haS1wb3dlcmQtamVlLWxlYXJuL2RhdGFiYXNlcy8oZGVmYXVsdCkvY29sbGVjdGlvbkdyb3Vwcy9xdWl6UmVzdWx0cy9pbmRleGVzL18QARoKCgZ1c2VySWQQARoPCgtjb21wbGV0ZWRBdBACGgwKCF9fbmFtZV9fEAI","_blank")},className:"bg-yellow-600 hover:bg-yellow-500 text-white font-bold py-2 px-4 rounded-lg transition-all flex items-center justify-center gap-2 mx-auto",children:[(0,r.jsx)(x.A,{size:16})," Create Index"]})]}),(0,r.jsx)("p",{className:"text-gray-400 mb-4",children:"After creating the index, it may take a few minutes to become active."}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 px-6 rounded-lg transition-all",children:"Reload Page"})]})})});if("noQuizResults"===n)return(0,r.jsx)("div",{className:"min-h-screen bg-slate-900 text-gray-200 font-sans p-4 sm:p-8 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-center max-w-md mx-auto",children:(0,r.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-8",children:[(0,r.jsx)(b.A,{size:48,className:"text-blue-400 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"No Quiz Results Yet"}),(0,r.jsx)("p",{className:"text-gray-400 mb-6",children:"You haven't completed any quizzes yet. Complete a quiz to see your results here."}),(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsxs)("button",{onClick:()=>Q.push("/practice"),className:"bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-6 rounded-lg transition-all flex items-center justify-center gap-2",children:[(0,r.jsx)(m.A,{size:18})," Start Practice"]}),(0,r.jsxs)("button",{onClick:L,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg transition-all flex items-center justify-center gap-2",children:[(0,r.jsx)(h.A,{size:18})," Back to Dashboard"]})]})]})})});if(n||!e)return(0,r.jsx)("div",{className:"min-h-screen bg-slate-900 text-gray-200 font-sans p-4 sm:p-8 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-center max-w-md mx-auto",children:(0,r.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-8",children:[(0,r.jsx)(f.A,{size:48,className:"text-red-500 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Error Loading Results"}),(0,r.jsx)("p",{className:"text-gray-400 mb-6",children:n||"Unable to load quiz results"}),(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-6 rounded-lg transition-all",children:"Try Again"}),(0,r.jsx)("button",{onClick:L,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg transition-all",children:"Back to Dashboard"})]})]})})});let D=Math.round(e.correctAnswers/e.totalQuestions*100),G=[{name:"Correct",value:e.correctAnswers},{name:"Incorrect",value:e.totalQuestions-e.correctAnswers}],K=["#22c55e","#ef4444"];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c(),{children:[(0,r.jsx)("title",{className:"jsx-3e5473c69ebf21b3",children:"Quiz Results | JEE Solver"}),(0,r.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap",rel:"stylesheet",className:"jsx-3e5473c69ebf21b3"})]}),(0,r.jsx)("canvas",{id:"animation-canvas",ref:R,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:0,opacity:.3},className:"jsx-3e5473c69ebf21b3"}),(0,r.jsx)("div",{className:"jsx-3e5473c69ebf21b3 min-h-screen bg-slate-900 text-gray-200 font-sans p-4 sm:p-8 relative z-10",children:(0,r.jsxs)("div",{className:"jsx-3e5473c69ebf21b3 max-w-6xl mx-auto",children:[(0,r.jsxs)("header",{className:"jsx-3e5473c69ebf21b3 flex items-center justify-between mb-8",children:[(0,r.jsxs)("button",{onClick:L,className:"jsx-3e5473c69ebf21b3 flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-colors",children:[(0,r.jsx)(p.A,{size:18}),"Back to Dashboard"]}),(0,r.jsx)("h1",{className:"jsx-3e5473c69ebf21b3 text-3xl sm:text-4xl font-black text-white text-center",children:"Quiz Results"}),(0,r.jsx)("div",{className:"jsx-3e5473c69ebf21b3 w-10"})]}),(0,r.jsxs)("section",{className:"jsx-3e5473c69ebf21b3 grid grid-cols-1 md:grid-cols-3 gap-6 mb-10",children:[(0,r.jsxs)("div",{className:"jsx-3e5473c69ebf21b3 results-summary-card bg-white/5 border border-white/10 rounded-2xl p-6 text-center flex flex-col justify-center items-center",children:[(0,r.jsx)(j.A,{size:40,className:"text-yellow-400 mb-3"}),(0,r.jsxs)("p",{className:"jsx-3e5473c69ebf21b3 text-5xl font-bold text-white",children:[D,(0,r.jsx)("span",{className:"jsx-3e5473c69ebf21b3 text-3xl text-gray-400",children:"%"})]}),(0,r.jsx)("p",{className:"jsx-3e5473c69ebf21b3 text-lg text-gray-300",children:"Your Score"}),(0,r.jsx)("p",{className:"jsx-3e5473c69ebf21b3 text-sm text-gray-400 mt-2",children:e.quizTitle||"Quick Quiz"})]}),(0,r.jsxs)("div",{className:"jsx-3e5473c69ebf21b3 results-summary-card bg-white/5 border border-white/10 rounded-2xl p-6 flex flex-col justify-center gap-4",children:[(0,r.jsxs)("div",{className:"jsx-3e5473c69ebf21b3 flex items-center gap-4",children:[(0,r.jsx)(b.A,{size:24,className:"text-blue-400"}),(0,r.jsxs)("p",{className:"jsx-3e5473c69ebf21b3 text-lg",children:["Total Questions: ",(0,r.jsx)("span",{className:"jsx-3e5473c69ebf21b3 font-bold text-white",children:e.totalQuestions})]})]}),(0,r.jsxs)("div",{className:"jsx-3e5473c69ebf21b3 flex items-center gap-4",children:[(0,r.jsx)(g.A,{size:24,className:"text-green-500"}),(0,r.jsxs)("p",{className:"jsx-3e5473c69ebf21b3 text-lg",children:["Correct Answers: ",(0,r.jsx)("span",{className:"jsx-3e5473c69ebf21b3 font-bold text-white",children:e.correctAnswers})]})]}),(0,r.jsxs)("div",{className:"jsx-3e5473c69ebf21b3 flex items-center gap-4",children:[(0,r.jsx)(f.A,{size:24,className:"text-red-500"}),(0,r.jsxs)("p",{className:"jsx-3e5473c69ebf21b3 text-lg",children:["Incorrect Answers: ",(0,r.jsx)("span",{className:"jsx-3e5473c69ebf21b3 font-bold text-white",children:e.totalQuestions-e.correctAnswers})]})]})]}),(0,r.jsx)("div",{className:"jsx-3e5473c69ebf21b3 results-summary-card bg-white/5 border border-white/10 rounded-2xl p-6",children:(0,r.jsx)(N.u,{width:"100%",height:150,children:(0,r.jsxs)(v.r,{children:[(0,r.jsx)(A.F,{data:G,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:60,innerRadius:40,paddingAngle:5,children:G.map((e,t)=>(0,r.jsx)(E.f,{fill:K[t%K.length],stroke:K[t%K.length]},"cell-".concat(t)))}),(0,r.jsx)(z.s,{iconType:"circle"})]})})})]}),(0,r.jsxs)("section",{className:"jsx-3e5473c69ebf21b3",children:[(0,r.jsx)("h2",{className:"jsx-3e5473c69ebf21b3 text-2xl font-bold text-white mb-6",children:"Question Review"}),(0,r.jsx)("div",{className:"jsx-3e5473c69ebf21b3 space-y-4",children:e.questions&&e.questions.map((e,t)=>(0,r.jsxs)("div",{className:"jsx-3e5473c69ebf21b3 "+"question-review-card bg-white/5 border-l-4 rounded-lg p-5 ".concat(e.isCorrect?"border-green-500":"border-red-500"),children:[(0,r.jsxs)("p",{className:"jsx-3e5473c69ebf21b3 font-semibold text-lg text-white mb-3",children:["Q",t+1,": ",e.question]}),(0,r.jsxs)("div",{className:"jsx-3e5473c69ebf21b3 space-y-2 text-md",children:[(0,r.jsxs)("p",{className:"jsx-3e5473c69ebf21b3 "+"flex items-center gap-2 ".concat(e.isCorrect?"text-green-400":"text-red-400"),children:[e.isCorrect?(0,r.jsx)(g.A,{size:18}):(0,r.jsx)(f.A,{size:18}),"Your Answer: ",(0,r.jsx)("span",{className:"jsx-3e5473c69ebf21b3 font-mono p-1 rounded bg-black/20",children:e.userAnswer})]}),!e.isCorrect&&(0,r.jsxs)("p",{className:"jsx-3e5473c69ebf21b3 flex items-center gap-2 text-green-400",children:[(0,r.jsx)(g.A,{size:18}),"Correct Answer: ",(0,r.jsx)("span",{className:"jsx-3e5473c69ebf21b3 font-mono p-1 rounded bg-black/20",children:e.correctAnswer})]})]})]},t))})]}),(0,r.jsxs)("footer",{className:"jsx-3e5473c69ebf21b3 mt-10 flex flex-col sm:flex-row justify-center items-center gap-4",children:[(0,r.jsxs)("button",{onClick:()=>{e&&e.quizId?Q.push("/quiz/".concat(e.quizId)):Q.push("/practice")},className:"jsx-3e5473c69ebf21b3 w-full sm:w-auto bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-8 rounded-lg flex items-center justify-center gap-2 transition-all",children:[(0,r.jsx)(w.A,{size:18})," Retry Quiz"]}),(0,r.jsxs)("button",{onClick:L,className:"jsx-3e5473c69ebf21b3 w-full sm:w-auto bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-8 rounded-lg flex items-center justify-center gap-2 transition-all",children:[(0,r.jsx)(y.A,{size:18})," Back to Dashboard"]})]})]})}),(0,r.jsx)(i(),{id:"3e5473c69ebf21b3",children:'@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap");*{margin:0;padding:0;box-sizing:border-box}body{font-family:"Inter","Segoe UI",Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(135deg,#020617 0%,#0f172a 100%);color:#f8fafc;min-height:100vh;overflow-x:hidden}::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{background:rgba(15,23,42,.5)}::-webkit-scrollbar-thumb{background:linear-gradient(to bottom,#4f46e5,#7c3aed);border-radius:4px}::-webkit-scrollbar-thumb:hover{background:linear-gradient(to bottom,#7c3aed,#0891b2)}@keyframes float{0%,100%{transform:translatey(0)}50%{transform:translatey(-10px)}}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.results-summary-card:hover{transform:translatey(-5px);box-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 10px 10px -5px rgba(0,0,0,.04)}@media(max-width:768px){h1{font-size:2.2rem!important}}.bg-white\\\\/5 {background-color:rgba(255,255,255,.05)}.border-white\\\\/10 {border-color:rgba(255,255,255,.1)}'})]})}}},e=>{e.O(0,[742,659,20,391,428,717,371,409,919,636,593,792],()=>e(e.s=820)),_N_E=e.O()}]);